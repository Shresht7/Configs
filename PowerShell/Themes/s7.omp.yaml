# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json

# ================
# GENERAL SETTINGS
# ================

version: 2
console_title_template: "{{.Folder}}"
final_space: true
# terminal_background: "#333333"

# =============
# COLOR PALETTE
# =============

palette:
  black: "#333333"
  blue: "#33658A"
  green: "#33AA33"
  orange: "#FF5400"
  pink: "#FF479C"
  red: "#E91E63"
  white: "#EEEEEE"
  yellow: "#DD6611"
  git: "#f04f33"
  git-background: "#fffb38"
  git-foreground: "#193549"
  git-modified: "#FF9248"
  git-diverged: "#ff4500"
  git-ahead: "#B388FF"
  git-behind: "#B388FF"

# ======
# BLOCKS
# ======

blocks:
  # === LEFT ===
  - type: prompt
    alignment: left
    segments:
      # Session
      - background: p:white
        foreground: p:black
        leading_diamond: 
        style: diamond
        template: " S7 "
        trailing_diamond: 
        type: session

      # Operating System
      - background: p:blue
        foreground: p:white
        powerline_symbol: 
        style: powerline
        template: " {{ if .WSL }}WSL at {{ end }}{{.Icon}} "
        type: os

      # Path
      - background: p:black
        foreground: p:white
        powerline_symbol: 
        properties:
          folder_separator_icon: "  "
          home_icon: "~"
          style: folder
        style: powerline
        template: "  {{ .Path }} "
        type: path

      # Git
      - background: "p:git-background"
        background_templates:
          - "{{ if or (.Working.Changed) (.Staging.Changed) }}p:git-modified{{ end }}"
          - "{{ if and (gt .Ahead 0) (gt .Behind 0) }}p:git-diverged{{ end }}"
          - "{{ if gt .Ahead 0 }}p:git-ahead{{ end }}"
          - "{{ if gt .Behind 0 }}p:git-behind{{ end }}"
        foreground: "p:git-foreground"
        leading_diamond: 
        powerline_symbol: 
        properties:
          branch_max_length: 25
          fetch_stash_count: true
          fetch_status: true
          fetch_upstream_icon: true
        style: powerline
        template: " {{ .UpstreamIcon }}{{ .HEAD }}{{ .BranchStatus }}{{ if .Working.Changed }}  {{ .Working.String }}{{ end }}{{ if and (.Working.Changed) (.Staging.Changed) }} |{{ end }}{{ if .Staging.Changed }}  {{ .Staging.String }}{{ end }}{{ if gt .StashCount 0 }}  {{ .StashCount }}{{ end }} "
        trailing_diamond: 
        type: git

      # Admin/Root
      - background: p:red
        foreground: p:white
        powerline_symbol: 
        properties:
          root_icon: 
        style: accordion
        template: "  "
        type: root

  # === RIGHT ===
  - type: rprompt
    segments:
      # Exit Code
      - background: p:blue
        background_templates:
          - "{{ if gt .Code 0 }}p:red{{ end }}"
        foreground: p:white
        leading_diamond: 
        properties:
          always_enabled: true
        style: diamond
        template: "  "
        type: exit

      # Execution Time
      - background: p:black
        foreground: p:white
        invert_powerline: true
        powerline_symbol: 
        properties:
          always_enabled: true
        style: powerline
        template: "\U0001F556{{ .FormattedMs }} "
        type: executiontime

      # Node
      - background: "#6CA35E"
        foreground: "#ffffff"
        invert_powerline: true
        powerline_symbol: 
        properties:
          fetch_version: true
        style: powerline
        template: "  {{ if .PackageManagerIcon }}{{ .PackageManagerIcon }} {{ end }}{{ .Full }} "
        type: node

      # Go
      - background: "#8ED1F7"
        foreground: "#111111"
        invert_powerline: true
        powerline_symbol: 
        properties:
          fetch_version: true
        style: powerline
        template: "  {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }} "
        type: go

      # Rust
      - background: "#99908a"
        foreground: "#193549"
        style: powerline
        invert_powerline: true
        powerline_symbol: 
        properties:
          fetch_version: true
        template: " \uE7a8 {{ .Full }} "
        type: rust

      # Julia
      - background: "#4063D8"
        foreground: "#111111"
        invert_powerline: true
        powerline_symbol: 
        properties:
          fetch_version: true
        style: powerline
        template: "  {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }} "
        type: julia

      # Python
      - background: "#FFDE57"
        foreground: "#111111"
        invert_powerline: true
        powerline_symbol: 
        properties:
          display_mode: files
          fetch_virtual_env: false
        style: powerline
        template: "  {{ .Full }} "
        type: python

      # Ruby
      - background: "#AE1401"
        foreground: "#ffffff"
        invert_powerline: true
        powerline_symbol: 
        properties:
          display_mode: files
          fetch_version: true
        style: powerline
        template: "  {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }} "
        type: ruby

      # Azure Functions
      - background: "#FEAC19"
        foreground: "#ffffff"
        invert_powerline: true
        powerline_symbol: 
        properties:
          display_mode: files
          fetch_version: false
        style: powerline
        template: " {{ if .Error }}{{ .Error }}{{ else }}{{ .Full }}{{ end }} "
        type: azfunc

      # Amazon Web Services
      - background_templates:
          - '{{if contains "default" .Profile}}#FFA400{{end}}'
          - '{{if contains "jan" .Profile}}#f1184c{{end}}'
        foreground: "#ffffff"
        invert_powerline: true
        powerline_symbol: 
        properties:
          display_default: false
        style: powerline
        template: "  {{ .Profile }}{{ if .Region }}@{{ .Region }}{{ end }} "
        type: aws

      # Battery
      - background: "#f36943"
        background_templates:
          - '{{if eq "Charging" .State.String}}#40c4ff{{end}}'
          - '{{if eq "Discharging" .State.String}}#ff5722{{end}}'
          - '{{if eq "Full" .State.String}}#4caf50{{end}}'
        foreground: "#ffffff"
        invert_powerline: true
        powerline_symbol: 
        properties:
          charged_icon: " "
          charging_icon: " "
          discharging_icon: " "
        style: powerline
        template: " {{ if not .Error }}{{ .Icon }}{{ .Percentage }}{{ end }}{{ .Error }} "
        type: battery

      # Time
      - background: p:white
        foreground: p:black
        invert_powerline: true
        leading_diamond: 
        properties:
          time_format: "15:04"
        style: diamond
        template: " {{ .CurrentDate | date .Format }} "
        trailing_diamond: 
        type: time

# ========
# TOOLTIPS
# ========

tooltips:
  # Shell
  - background: "#0077c2"
    foreground: "#ffffff"
    leading_diamond: 
    style: diamond
    template: " {{ .Name }} "
    tips:
      - shell
    trailing_diamond: 
    type: shell

  # Present Working Directory
  - style: powerline
    template: "{{ path .Path .Location }}"
    tips:
      - pwd
      - dir
      - ls
      - explorer
    type: path

  # Git
  - style: diamond
    tips:
      - git
      - gh
    foreground: p:white
    background: p:git
    leading_diamond: 
    trailing_diamond: 
    template: "{{ .HEAD }}{{ if .Staging.Changed }} \uF046 {{ .Staging.String }}{{ end }}{{ if and (.Working.Changed) (.Staging.Changed) }} |{{ end }}{{ if .Working.Changed }} \uF044 {{ .Working.String }}{{ end }}"
    properties:
      fetch_status: true
      fetch_upstream_icon: false
    type: git

  # Spotify
  - properties:
      paused_icon: 
      playing_icon: 
      stopped_icon: 
      track_separator: "-"
    style: powerline
    template: ' {{ .Icon }}{{ if ne .Status "stopped" }}{{ .Artist }} - {{ .Track }}{{ end }} '
    tips:
      - spotify
    type: spotify

  # System Information
  - properties:
      precision: 2
    style: powerline
    template: "CPU: {{ (index .CPU 0).ModelName }} | Memory: {{ .PhysicalPercentUsed }}%"
    tips:
      - sysinfo
    type: sysinfo

  # WiFi
  - background: p:black
    background_templates:
      - "{{ if (lt .Signal 60) }}p:red{{ else if (lt .Signal 80) }}p:yellow{{ else }}p:green{{ end }}"
    foreground: p:white
    leading_diamond: 
    style: diamond
    template: "{{ if eq .Type \"wifi\"}}\uf1eb{{ else if eq .Type \"ethernet\"}}\uf6ff{{ end }} {{ .SSID }}"
    tips:
      - wifi
    trailing_diamond: 
    type: connection
